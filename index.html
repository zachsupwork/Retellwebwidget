<!-- Add this to your HTML -->
<script src="https://cdn.retellai.com/sdk/web-sdk.js"></script>

<!-- Add the styles for the button -->
<style>
  #retell-call-widget {
    margin: 20px 0;
  }
  .retell-call-button {
    background-color: #2563eb;
    color: white;
    padding: 10px 20px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    font-family: system, -apple-system, sans-serif;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: background-color 0.2s;
  }
  .retell-call-button:hover {
    background-color: #1d4ed8;
  }
</style>

<!-- Add this where you want the call widget to appear -->
<div id="retell-call-widget"></div>

<script>
// Create a function to initialize the widget
function initializeRetellWidget() {
  if (typeof Retell === 'undefined') {
    console.error('Retell SDK not loaded');
    return;
  }

  try {
    const widget = Retell.widget.createCallWidget({
      containerId: 'retell-call-widget',
      accessToken: 'eyJhbGciOiJIUzI1NiJ9.eyJ2aWRlbyI6eyJyb29tSm9pbiI6dHJ1ZSwicm9vbSI6IndlYl9jYWxsX2YxNTI5YjZjMzU0N2RlYmRjZjU5NmExOTQ1MiJ9LCJpc3MiOiJBUElqWGZBMzVHTmM3WHgiLCJleHAiOjE3NDAyNDU3MTEsIm5iZiI6MCwic3ViIjoiY2xpZW50In0.ly04LEJoqY58joVHQ5eCVYK8PkoUfz34mRem_9OgJJ0',
      renderButton: true,
      buttonConfig: {
        text: 'Connect to Agent',
      },
      styles: {
        button: 'retell-call-button'
      }
    });

    widget.mount();
    console.log('Retell widget initialized successfully');
  } catch (error) {
    console.error('Error initializing Retell widget:', error);
  }
}

// Function to load the Retell SDK
function loadRetellSDK() {
  // Check if the script is already loaded
  if (typeof Retell !== 'undefined') {
    initializeRetellWidget();
    return;
  }

  // Create and append the script
  const script = document.createElement('script');
  script.src = 'https://cdn.retellai.com/sdk/web-sdk.js';
  script.async = true;
  script.onload = initializeRetellWidget;
  script.onerror = () => console.error('Failed to load Retell SDK');
  document.body.appendChild(script);
}

// Execute when the page is ready
if (document.readyState === 'complete') {
  loadRetellSDK();
} else {
  window.addEventListener('load', loadRetellSDK);
}
</script>
